"use strict";(self["webpackChunkfilefront"]=self["webpackChunkfilefront"]||[]).push([[755],{2648:function(e,t,a){a.d(t,{f2:function(){return l}});a(7658);function l(e){var t=new Date(e).getFullYear(),a=new Date(e).getMonth()+1<10?"0"+(new Date(e).getMonth()+1):new Date(e).getMonth()+1,l=new Date(e).getDate()<10?"0"+new Date(e).getDate():new Date(e).getDate(),o=new Date(e).getHours()<10?"0"+new Date(e).getHours():new Date(e).getHours(),n=new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes(),r=new Date(e).getSeconds()<10?"0"+new Date(e).getSeconds():new Date(e).getSeconds();return t+"年"+a+"月"+l+"日"+o+"时"+n+"分"+r+"秒"}},5188:function(e,t,a){a.d(t,{Z:function(){return m}});var l=a(6252),o=a(3577);const n={class:"table-container"},r={class:"search-wrap"},i={class:"table-wrap"},c={key:0,class:"pagination-wrap"};function d(e,t,a,d,p,g){const u=(0,l.up)("el-table-column"),s=(0,l.up)("el-tag"),m=(0,l.up)("el-button"),w=(0,l.up)("el-switch"),y=(0,l.up)("el-progress"),h=(0,l.up)("el-image"),f=(0,l.up)("el-table"),C=(0,l.up)("el-pagination"),b=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",r,[(0,l.WI)(e.$slots,"search")]),(0,l._)("div",i,[(0,l.wy)(((0,l.wg)(),(0,l.j4)(f,{data:a.data,border:"",stripe:"",size:"mini","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"},"header-cell-style":a.headerCellStyle,"cell-style":e.cellStyle,onSelectionChange:e.onSelectionChange,style:{width:"100%"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.column,(t=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[t.prop||t.label?"tag"==t.type?((0,l.wg)(),(0,l.j4)(u,{key:1,"show-overflow-tooltip":"",label:t.label,align:null!=t.align?t.align:"center",width:t.width},{default:(0,l.w5)((e=>[(0,l.Wm)(s,{size:t.option.size,effect:t.option.effect,type:t.option.type},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.row[t.prop]),1)])),_:2},1032,["size","effect","type"])])),_:2},1032,["label","align","width"])):"button"==t.type?((0,l.wg)(),(0,l.j4)(u,{key:2,"show-overflow-tooltip":"",label:t.label,align:null!=t.align?t.align:"center",width:t.width},{default:(0,l.w5)((a=>[(0,l.Wm)(m,{onClick:t=>e.$emit("onButtonClick",a.row),type:"text",size:t.option.size},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(a.row[t.prop]),1)])),_:2},1032,["onClick","size"])])),_:2},1032,["label","align","width"])):"switch"==t.type?((0,l.wg)(),(0,l.j4)(u,{key:3,"show-overflow-tooltip":"",label:t.label,align:null!=t.align?t.align:"center",width:t.width},{default:(0,l.w5)((a=>[(0,l.Wm)(w,{onChange:t=>e.$emit("onSwitchChange",a.row),"inline-prompt":"","active-value":t.option.activeValue,"active-color":t.option.activeColor,"active-text":t.option.activeText,"inactive-value":t.option.inactiveValue,"inactive-color":t.option.inactiveColor,"inactive-text":t.option.inactiveText,modelValue:a.row[t.prop],"onUpdate:modelValue":e=>a.row[t.prop]=e},null,8,["onChange","active-value","active-color","active-text","inactive-value","inactive-color","inactive-text","modelValue","onUpdate:modelValue"])])),_:2},1032,["label","align","width"])):"progress"==t.type?((0,l.wg)(),(0,l.j4)(u,{key:4,"show-overflow-tooltip":"",label:t.label,align:null!=t.align?t.align:"center",width:t.width},{default:(0,l.w5)((e=>[(0,l.Wm)(y,{percentage:e.row[t.prop],status:t.option.status,color:t.option.color},null,8,["percentage","status","color"])])),_:2},1032,["label","align","width"])):"img"==t.type?((0,l.wg)(),(0,l.j4)(u,{key:5,"show-overflow-tooltip":"",label:t.label,align:null!=t.align?t.align:"center",width:t.width},{default:(0,l.w5)((a=>[(0,l.Wm)(h,{style:{width:"50px",height:"50px"},src:e.imageUrlPrefix+a.row[t.prop],class:"head_pic"},null,8,["src"])])),_:2},1032,["label","align","width"])):((0,l.wg)(),(0,l.j4)(u,{key:6,"show-overflow-tooltip":"",prop:null==t.alias?t.prop:t.alias,label:t.label,align:null!=t.align?t.align:"center",width:t.width,fixed:t.fixed},null,8,["prop","label","align","width","fixed"])):((0,l.wg)(),(0,l.j4)(u,{key:0,fixed:t.fixed,type:"selection",width:"45"},null,8,["fixed"]))],64)))),128)),a.operation?((0,l.wg)(),(0,l.j4)(u,{key:0,fixed:"right",label:"操作",align:"center",width:"220"},{default:(0,l.w5)((t=>[(0,l.WI)(e.$slots,"column",{column:t})])),_:3})):(0,l.kq)("",!0)])),_:3},8,["data","header-cell-style","cell-style","onSelectionChange"])),[[b,a.loading]])]),a.page?((0,l.wg)(),(0,l.iD)("div",c,[(0,l.Wm)(C,{onSizeChange:e.onSizeChange,onCurrentChange:e.onCurrentChange,layout:"total, sizes, prev, pager, next, jumper","current-page":a.page.current,"page-sizes":[10,20,50,100],"page-size":a.page.size,total:a.page.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])):(0,l.kq)("",!0)])}var p=a(2262),g={props:{loading:{type:Boolean,default:!1},page:{type:Object,default:{current:1,size:10,total:0}},column:{type:Array,default:[]},operation:{type:Boolean,default:!1},headerCellStyle:{type:Object,default:{color:"#606266",fontWeight:700,background:"var(--bg1)"}},data:{type:Array,default:[]}},emits:["onSizeChange","onCurrentChange","onSelectionChange","setCellColor","onButtonClick","onSwitchChange"],setup(e,t){const a=(0,p.qj)({cellStyle:function(e){let a={};return t.emit("setCellColor",e,((e={})=>{a=e})),a.padding="2px",a},imageUrlPrefix:(0,l.FN)()?.appContext.config.globalProperties.$imageUrl,onSizeChange:e=>{t.emit("onSizeChange",e)},onCurrentChange:e=>{t.emit("onCurrentChange",e)}});return{...(0,p.BK)(a)}}},u=a(3744);const s=(0,u.Z)(g,[["render",d]]);var m=s},4755:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var l=a(6252);const o={style:{"margin-right":"0px","padding-right":"0px"}},n={style:{"margin-left":"0px","padding-right":"0px"}},r={class:"dialog-footer"};function i(e,t,a,i,c,d){const p=(0,l.up)("el-button"),g=(0,l.up)("el-input"),u=(0,l.up)("el-upload"),s=(0,l.up)("Document"),m=(0,l.up)("Table"),w=(0,l.up)("el-form-item"),y=(0,l.up)("el-form"),h=(0,l.up)("el-dialog"),f=(0,l.up)("el-card");return(0,l.wg)(),(0,l.j4)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{data:e.tableData,column:e.tableTitle,operation:!0,page:e.page,loading:e.loading,onOnSizeChange:e.onSizeChange,onOnCurrentChange:e.onCurrentChange,onSetCellColor:e.setCellColor},{search:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(p,{type:"primary",onClick:e.onAddCategory},{default:(0,l.w5)((()=>[(0,l.Uk)("添加新闻类型")])),_:1},8,["onClick"])]),(0,l._)("div",null,[(0,l.Wm)(g,{modelValue:e.searchForm.cname,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchForm.cname=t),placeholder:"请输入新闻类型名称"},null,8,["modelValue"])]),(0,l._)("div",null,[(0,l.Wm)(p,{onClick:e.onRefresh,icon:"RefreshRight",circle:""},null,8,["onClick"])]),(0,l._)("div",null,[(0,l.Wm)(p,{onClick:e.onSearch,type:"primary",icon:"Search"},{default:(0,l.w5)((()=>[(0,l.Uk)("查询")])),_:1},8,["onClick"])]),(0,l._)("div",null,[(0,l.Wm)(p,{onClick:e.exportOut,type:"primary",icon:"Download"},{default:(0,l.w5)((()=>[(0,l.Uk)("导出excel")])),_:1},8,["onClick"])]),(0,l._)("div",o,[(0,l.Wm)(u,{ref:"fileUploadButton",httpRequest:e.exportIn,"show-file-list":!1,"auto-upload":"true",class:"upload-demo",limit:1},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{type:"primary",icon:"Upload"},{default:(0,l.w5)((()=>[(0,l.Uk)("批量新增")])),_:1})])),_:1},8,["httpRequest"])]),(0,l._)("div",n,[(0,l._)("a",{style:{color:"red"},onClick:t[1]||(t[1]=(...t)=>e.downLoadTemplate&&e.downLoadTemplate(...t))},[(0,l.Wm)(s,{style:{width:"15px",height:"15px"}}),(0,l.Uk)(" 模板下载")])])])),column:(0,l.w5)((t=>[(0,l.Wm)(p,{onClick:a=>e.onEdit(t),type:"text",style:{color:"var(--edit)"}},{default:(0,l.w5)((()=>[(0,l.Uk)("编辑")])),_:2},1032,["onClick"]),(0,l.Wm)(p,{onClick:a=>e.onDelete(t),type:"text",style:{color:"var(--delete)"}},{default:(0,l.w5)((()=>[(0,l.Uk)("删除")])),_:2},1032,["onClick"])])),_:1},8,["data","column","page","loading","onOnSizeChange","onOnCurrentChange","onSetCellColor"]),(0,l.Wm)(h,{title:e.categoryTitle,modelValue:e.categoryVisible,"onUpdate:modelValue":t[7]||(t[7]=t=>e.categoryVisible=t),"show-close":!1},{footer:(0,l.w5)((()=>[(0,l._)("span",r,[(0,l.Wm)(p,{onClick:t[6]||(t[6]=t=>e.categoryVisible=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1}),(0,l.Wm)(p,{type:"primary",onClick:e.onSubmit},{default:(0,l.w5)((()=>[(0,l.Uk)("提交")])),_:1},8,["onClick"])])])),default:(0,l.w5)((()=>[(0,l.Wm)(y,{model:e.categoryForm,rules:e.rules,ref:"categoryRuleForm","status-icon":"","label-width":"150px"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{prop:"typeId",label:"新闻类型id",rules:[{required:!0,message:"请输入新闻类型id",trigger:"blur"},{pattern:/^[1-9][0-9]{0,10}$/,message:"id只能是数字且不能有空格,长度不能超过11位",trigger:"blur"}]},{default:(0,l.w5)((()=>[0==e.operate?((0,l.wg)(),(0,l.j4)(g,{key:0,modelValue:e.categoryForm.typeId,"onUpdate:modelValue":t[2]||(t[2]=t=>e.categoryForm.typeId=t),placeholder:"请输入新闻类型id"},null,8,["modelValue"])):(0,l.kq)("",!0),1==e.operate?((0,l.wg)(),(0,l.j4)(g,{key:1,disabled:"",modelValue:e.categoryForm.typeId,"onUpdate:modelValue":t[3]||(t[3]=t=>e.categoryForm.typeId=t),placeholder:"请输入新闻类型id"},null,8,["modelValue"])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(w,{prop:"cname",label:"新闻类型中文名",rules:[{required:!0,message:"请输入新闻类型中文名",trigger:"blur"}]},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{modelValue:e.categoryForm.cname,"onUpdate:modelValue":t[4]||(t[4]=t=>e.categoryForm.cname=t),placeholder:"请输入新闻类型中文名"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(w,{prop:"ename",label:"新闻类型英文名",rules:[{required:!0,message:"请输入新闻类型英文名",trigger:"blur"}]},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{modelValue:e.categoryForm.ename,"onUpdate:modelValue":t[5]||(t[5]=t=>e.categoryForm.ename=t),placeholder:"请输入新闻类型英文名"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])),_:1})}var c=a(2262),d=a(1348),p=a(9737),g=a(5188),u=(a(2648),a(9669)),s=a.n(u),m={props:{},components:{Table:g.Z},setup(){(0,l.bv)((()=>{e.onCategoryPage()}));const e=(0,c.qj)({searchForm:{cname:null},loading:!1,fileUploadButton:(0,c.iH)(),page:{current:1,size:10,total:1},tableTitle:[{prop:"",label:"",fixed:"left"},{prop:"typeId",label:"新闻类型id"},{prop:"ename",label:"类型英文名"},{prop:"cname",label:"类型中文名"}],tableData:[],categoryRuleForm:(0,c.iH)(null),typeLoading:!1,categoryVisible:!1,categoryTitle:"添加新闻类型",operate:0,categoryForm:{typeId:"",ename:"",cname:""},orgData:[],onCategoryPage:()=>{e.loading=!0,s().get("/category/getCategoryList",{params:Object.assign(e.page,e.searchForm)}).then((t=>{e.loading=!1,e.tableData=t.data.result.list,e.page.current=t.data.result.pageNum,e.page.size=t.data.result.pageSize,e.page.total=t.data.result.total}))},onSearch:()=>{e.onCategoryPage()},onRefresh:()=>{e.searchForm={cname:null},e.onCategoryPage()},onSizeChange:t=>{e.page.size=t,e.onCategoryPage()},onCurrentChange:t=>{e.page.current=t,e.onCategoryPage()},onAddCategory:()=>{e.userTitle="添加新闻类型",e.operate=0,e.categoryForm={typeId:"",ename:"",cname:""},e.categoryVisible=!0},onEdit:t=>{e.userTitle="修改新闻类型",e.operate=1,e.categoryForm={typeId:t.column.row.typeId,cname:t.column.row.cname,ename:t.column.row.ename},e.categoryVisible=!0},onSubmit:async()=>{const t=e.categoryRuleForm;t&&(await t.validate(),0==e.operate?s().post("/category/categorySave",e.categoryForm).then((t=>{t.data.result&&(d.z8.success({message:"添加成功！",type:"success"}),e.onCategoryPage(),e.categoryVisible=!1)})):s().patch("/category/categoryUpdate",e.categoryForm).then((t=>{t.data.result&&(d.z8.success({message:"修改成功！",type:"success"}),e.onCategoryPage(),e.categoryVisible=!1)})))},onDelete:t=>{p.T.confirm("此操作将永久删除该新闻, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{let a={typeId:t.column.row.typeId};s()["delete"]("/category/categoryDelete",{params:a}).then((t=>{t&&(d.z8.success("删除成功!"),e.onCategoryPage())}))})).catch((e=>{console.log(e)}))},exportOut:()=>{e.loading=!0,s().get("/category/exportOut",{params:e.searchForm,responseType:"blob"}).then((t=>{e.loading=!1;let a=new Blob([t.data],{type:"application/vnd.ms-excel;charset=utf-8"}),l="新闻类型.xlsx";if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,l);else{let e=(window.URL||window.webkitURL).createObjectURL(a),t=document.createElement("a");t.style.display="none",t.href=e,t.download=l,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(e)}}))},downLoadTemplate:()=>{e.loading=!0,s().get("/category/downLoadTemplate",{responseType:"blob"}).then((t=>{e.loading=!1;let a=new Blob([t.data],{type:"application/vnd.ms-excel;charset=utf-8"}),l="新闻批量增加模板.xlsx";if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,l);else{let e=(window.URL||window.webkitURL).createObjectURL(a),t=document.createElement("a");t.style.display="none",t.href=e,t.download=l,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(e)}}))},exportIn:t=>{var a=t.file,l=new FormData;l.append("myfile",a),s().post("/category/exportIn",l).then((t=>{alert(t.data.result),e.onCategoryPage(),e.fileUploadButton.clearFiles()})).catch((e=>{console.log(e)}))}});return{...(0,c.BK)(e)}}},w=a(3744);const y=(0,w.Z)(m,[["render",i]]);var h=y}}]);
//# sourceMappingURL=755.3383a7d2.js.map