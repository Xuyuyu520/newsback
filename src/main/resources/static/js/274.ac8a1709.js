"use strict";(self["webpackChunkfilefront"]=self["webpackChunkfilefront"]||[]).push([[274],{5188:function(e,l,a){a.d(l,{Z:function(){return w}});var t=a(6252),n=a(3577);const o={class:"table-container"},i={class:"search-wrap"},r={class:"table-wrap"},s={key:0,class:"pagination-wrap"};function u(e,l,a,u,c,p){const d=(0,t.up)("el-table-column"),g=(0,t.up)("el-tag"),w=(0,t.up)("el-button"),m=(0,t.up)("el-switch"),h=(0,t.up)("el-progress"),f=(0,t.up)("el-image"),b=(0,t.up)("el-table"),C=(0,t.up)("el-pagination"),y=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",i,[(0,t.WI)(e.$slots,"search")]),(0,t._)("div",r,[(0,t.wy)(((0,t.wg)(),(0,t.j4)(b,{data:a.data,border:"",stripe:"",size:"mini","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"},"header-cell-style":a.headerCellStyle,"cell-style":e.cellStyle,onSelectionChange:e.onSelectionChange,style:{width:"100%"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.column,(l=>((0,t.wg)(),(0,t.iD)(t.HY,{key:l},[l.prop||l.label?"tag"==l.type?((0,t.wg)(),(0,t.j4)(d,{key:1,"show-overflow-tooltip":"",label:l.label,align:null!=l.align?l.align:"center",width:l.width},{default:(0,t.w5)((e=>[(0,t.Wm)(g,{size:l.option.size,effect:l.option.effect,type:l.option.type},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row[l.prop]),1)])),_:2},1032,["size","effect","type"])])),_:2},1032,["label","align","width"])):"button"==l.type?((0,t.wg)(),(0,t.j4)(d,{key:2,"show-overflow-tooltip":"",label:l.label,align:null!=l.align?l.align:"center",width:l.width},{default:(0,t.w5)((a=>[(0,t.Wm)(w,{onClick:l=>e.$emit("onButtonClick",a.row),type:"text",size:l.option.size},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row[l.prop]),1)])),_:2},1032,["onClick","size"])])),_:2},1032,["label","align","width"])):"switch"==l.type?((0,t.wg)(),(0,t.j4)(d,{key:3,"show-overflow-tooltip":"",label:l.label,align:null!=l.align?l.align:"center",width:l.width},{default:(0,t.w5)((a=>[(0,t.Wm)(m,{onChange:l=>e.$emit("onSwitchChange",a.row),"inline-prompt":"","active-value":l.option.activeValue,"active-color":l.option.activeColor,"active-text":l.option.activeText,"inactive-value":l.option.inactiveValue,"inactive-color":l.option.inactiveColor,"inactive-text":l.option.inactiveText,modelValue:a.row[l.prop],"onUpdate:modelValue":e=>a.row[l.prop]=e},null,8,["onChange","active-value","active-color","active-text","inactive-value","inactive-color","inactive-text","modelValue","onUpdate:modelValue"])])),_:2},1032,["label","align","width"])):"progress"==l.type?((0,t.wg)(),(0,t.j4)(d,{key:4,"show-overflow-tooltip":"",label:l.label,align:null!=l.align?l.align:"center",width:l.width},{default:(0,t.w5)((e=>[(0,t.Wm)(h,{percentage:e.row[l.prop],status:l.option.status,color:l.option.color},null,8,["percentage","status","color"])])),_:2},1032,["label","align","width"])):"img"==l.type?((0,t.wg)(),(0,t.j4)(d,{key:5,"show-overflow-tooltip":"",label:l.label,align:null!=l.align?l.align:"center",width:l.width},{default:(0,t.w5)((a=>[(0,t.Wm)(f,{style:{width:"50px",height:"50px"},src:e.imageUrlPrefix+a.row[l.prop],class:"head_pic"},null,8,["src"])])),_:2},1032,["label","align","width"])):((0,t.wg)(),(0,t.j4)(d,{key:6,"show-overflow-tooltip":"",prop:null==l.alias?l.prop:l.alias,label:l.label,align:null!=l.align?l.align:"center",width:l.width,fixed:l.fixed},null,8,["prop","label","align","width","fixed"])):((0,t.wg)(),(0,t.j4)(d,{key:0,fixed:l.fixed,type:"selection",width:"45"},null,8,["fixed"]))],64)))),128)),a.operation?((0,t.wg)(),(0,t.j4)(d,{key:0,fixed:"right",label:"操作",align:"center",width:"220"},{default:(0,t.w5)((l=>[(0,t.WI)(e.$slots,"column",{column:l})])),_:3})):(0,t.kq)("",!0)])),_:3},8,["data","header-cell-style","cell-style","onSelectionChange"])),[[y,a.loading]])]),a.page?((0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(C,{onSizeChange:e.onSizeChange,onCurrentChange:e.onCurrentChange,layout:"total, sizes, prev, pager, next, jumper","current-page":a.page.current,"page-sizes":[10,20,50,100],"page-size":a.page.size,total:a.page.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])):(0,t.kq)("",!0)])}var c=a(2262),p={props:{loading:{type:Boolean,default:!1},page:{type:Object,default:{current:1,size:10,total:0}},column:{type:Array,default:[]},operation:{type:Boolean,default:!1},headerCellStyle:{type:Object,default:{color:"#606266",fontWeight:700,background:"var(--bg1)"}},data:{type:Array,default:[]}},emits:["onSizeChange","onCurrentChange","onSelectionChange","setCellColor","onButtonClick","onSwitchChange"],setup(e,l){const a=(0,c.qj)({cellStyle:function(e){let a={};return l.emit("setCellColor",e,((e={})=>{a=e})),a.padding="2px",a},imageUrlPrefix:(0,t.FN)()?.appContext.config.globalProperties.$imageUrl,onSizeChange:e=>{l.emit("onSizeChange",e)},onCurrentChange:e=>{l.emit("onCurrentChange",e)}});return{...(0,c.BK)(a)}}},d=a(3744);const g=(0,d.Z)(p,[["render",u]]);var w=g},2274:function(e,l,a){a.r(l),a.d(l,{default:function(){return h}});var t=a(6252);const n=["src"],o={class:"dialog-footer"};function i(e,l,a,i,r,s){const u=(0,t.up)("el-button"),c=(0,t.up)("el-input"),p=(0,t.up)("Table"),d=(0,t.up)("el-form-item"),g=(0,t.up)("Plus"),w=(0,t.up)("el-icon"),m=(0,t.up)("el-upload"),h=(0,t.up)("el-switch"),f=(0,t.up)("el-form"),b=(0,t.up)("el-dialog"),C=(0,t.up)("el-card");return(0,t.wg)(),(0,t.j4)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(p,{data:e.tableData,column:e.tableTitle,operation:!0,page:e.page,loading:e.loading,onOnSizeChange:e.onSizeChange,onOnCurrentChange:e.onCurrentChange,onSetCellColor:e.setCellColor},{search:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(u,{type:"primary",onClick:e.onAddNews},{default:(0,t.w5)((()=>[(0,t.Uk)("添加新闻总部")])),_:1},8,["onClick"])]),(0,t._)("div",null,[(0,t.Wm)(c,{modelValue:e.searchForm.cname,"onUpdate:modelValue":l[0]||(l[0]=l=>e.searchForm.cname=l),placeholder:"请输入新闻总部名称"},null,8,["modelValue"])]),(0,t._)("div",null,[(0,t.Wm)(u,{onClick:e.onRefresh,icon:"RefreshRight",circle:""},null,8,["onClick"])]),(0,t._)("div",null,[(0,t.Wm)(u,{onClick:e.onSearch,type:"primary",icon:"Search"},{default:(0,t.w5)((()=>[(0,t.Uk)("查询")])),_:1},8,["onClick"])])])),column:(0,t.w5)((l=>[(0,t.Wm)(u,{onClick:a=>e.onEdit(l),type:"text",style:{color:"var(--edit)"}},{default:(0,t.w5)((()=>[(0,t.Uk)("编辑")])),_:2},1032,["onClick"]),(0,t.Wm)(u,{onClick:a=>e.onDelete(l),type:"text",style:{color:"var(--delete)"}},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:2},1032,["onClick"])])),_:1},8,["data","column","page","loading","onOnSizeChange","onOnCurrentChange","onSetCellColor"]),(0,t.Wm)(b,{title:e.newsTitle,modelValue:e.newsVisible,"onUpdate:modelValue":l[5]||(l[5]=l=>e.newsVisible=l),"show-close":!1},{footer:(0,t.w5)((()=>[(0,t._)("span",o,[(0,t.Wm)(u,{onClick:l[4]||(l[4]=l=>e.newsVisible=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(u,{type:"primary",onClick:e.onSubmit},{default:(0,t.w5)((()=>[(0,t.Uk)("提交")])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t.Wm)(f,{model:e.newsForm,rules:s.rules,ref:"newsRuleForm","status-icon":"","label-width":"150px"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{prop:"cname",label:"新闻总部名",rules:[{required:!0,message:"请输入新闻总部名",trigger:"blur"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.newsForm.cname,"onUpdate:modelValue":l[1]||(l[1]=l=>e.newsForm.cname=l),placeholder:"请输入新闻总部名"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{prop:"tname",label:"负责人",rules:[{required:!0,message:"请输入负责人",trigger:"blur"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.newsForm.tname,"onUpdate:modelValue":l[2]||(l[2]=l=>e.newsForm.tname=l),placeholder:"请输入负责人"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"新闻总部图片"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"avatar-uploader",httpRequest:e.upload,"show-file-list":!1,"auto-upload":"true"},{default:(0,t.w5)((()=>[e.newsForm.url?((0,t.wg)(),(0,t.iD)("img",{key:0,src:e.imageUrlPrefix+e.newsForm.url,class:"avatar",style:{width:"178px",height:"178px"}},null,8,n)):((0,t.wg)(),(0,t.j4)(w,{key:1,class:"avatar-uploader-icon"},{default:(0,t.w5)((()=>[(0,t.Wm)(g)])),_:1}))])),_:1},8,["httpRequest"])])),_:1}),(0,t.Wm)(d,{prop:"enabled",label:"是否启用",rules:[{required:!0,message:"是否启用",trigger:"blur"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:e.newsForm.enabled,"onUpdate:modelValue":l[3]||(l[3]=l=>e.newsForm.enabled=l),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])),_:1})}var r=a(2262),s=a(1348),u=a(9737),c=a(5188),p=a(9669),d=a.n(p),g={computed:{rules(){return rules}},props:{},components:{Table:c.Z},setup(){(0,t.bv)((()=>{e.onNewsPage()}));const e=(0,r.qj)({searchForm:{cname:null},loading:!1,page:{current:1,size:10,total:1},tableTitle:[{prop:"",label:"",fixed:"left"},{prop:"cno",label:"新闻总部号"},{prop:"cname",label:"新闻总部名"},{prop:"tname",label:"负责人"},{prop:"url",label:"图片图片",type:"img"},{prop:"enabled",label:"是否启用"}],imageUrlPrefix:(0,t.FN)()?.appContext.config.globalProperties.$imageUrl,tableData:[],newsRuleForm:(0,r.iH)(null),typeLoading:!1,newsVisible:!1,newsTitle:"添加新闻总部信息",operate:0,newsForm:{cno:"",ename:"",cname:"",tname:"",url:"",enabled:!0},orgData:[],onNewsPage:()=>{e.loading=!0,d().get("/news/getNewsList",{params:Object.assign(e.page,e.searchForm)}).then((l=>{e.loading=!1,e.tableData=l.data.result.list,e.page.current=l.data.result.pageNum,e.page.size=l.data.result.pageSize,e.page.total=l.data.result.total}))},onSearch:()=>{e.onNewsPage()},onRefresh:()=>{e.searchForm={cname:null},e.onNewsPage()},onSizeChange:l=>{e.page.size=l,e.onNewsPage()},onCurrentChange:l=>{e.page.current=l,e.onNewsPage()},onAddNews:()=>{e.userTitle="添加新闻总部类型",e.operate=0,e.newsForm={cno:"",ename:"",cname:"",tname:"",url:"",enabled:!0},e.newsVisible=!0},onEdit:l=>{e.userTitle="修改新闻总部类型",e.operate=1,e.newsForm={cno:l.column.row.cno,cname:l.column.row.cname,ename:l.column.row.ename,tname:l.column.row.tname,url:l.column.row.url,enabled:l.column.row.enabled},e.newsVisible=!0},onSubmit:async()=>{const l=e.newsRuleForm;l&&(await l.validate(),0==e.operate?d().post("/news/newsSave",e.newsForm).then((l=>{l.data.result&&(s.z8.success({message:"添加成功！",type:"success"}),e.onNewsPage(),e.newsVisible=!1)})):d().patch("/news/newsUpdate",e.newsForm).then((l=>{l.data.result&&(s.z8.success({message:"修改成功！",type:"success"}),e.onNewsPage(),e.newsVisible=!1)})))},onDelete:l=>{u.T.confirm("此操作将永久删除该新闻, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{let a={cno:l.column.row.cno};d()["delete"]("/news/newsDelete",{params:a}).then((l=>{l&&(s.z8.success("删除成功!"),e.onNewsPage())}))})).catch((e=>{console.log(e)}))},upload:l=>{var a=l.file,t=new FormData;t.append("myfile",a),d().post("upload",t).then((l=>{e.newsForm.url=l.data.result,s.z8.success({message:"上传成功",type:"success"})})).catch((e=>{console.log(e)}))}});return{...(0,r.BK)(e)}}},w=a(3744);const m=(0,w.Z)(g,[["render",i]]);var h=m}}]);
//# sourceMappingURL=274.ac8a1709.js.map