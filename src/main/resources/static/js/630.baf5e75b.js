"use strict";(self["webpackChunkfilefront"]=self["webpackChunkfilefront"]||[]).push([[630],{5188:function(e,l,t){t.d(l,{Z:function(){return m}});var a=t(6252),o=t(3577);const n={class:"table-container"},i={class:"search-wrap"},r={class:"table-wrap"},p={key:0,class:"pagination-wrap"};function u(e,l,t,u,c,d){const s=(0,a.up)("el-table-column"),g=(0,a.up)("el-tag"),m=(0,a.up)("el-button"),f=(0,a.up)("el-switch"),y=(0,a.up)("el-progress"),h=(0,a.up)("el-image"),w=(0,a.up)("el-table"),C=(0,a.up)("el-pagination"),b=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",i,[(0,a.WI)(e.$slots,"search")]),(0,a._)("div",r,[(0,a.wy)(((0,a.wg)(),(0,a.j4)(w,{data:t.data,border:"",stripe:"",size:"mini","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"},"header-cell-style":t.headerCellStyle,"cell-style":e.cellStyle,onSelectionChange:e.onSelectionChange,style:{width:"100%"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.column,(l=>((0,a.wg)(),(0,a.iD)(a.HY,{key:l},[l.prop||l.label?"tag"==l.type?((0,a.wg)(),(0,a.j4)(s,{key:1,"show-overflow-tooltip":"",label:l.label,align:null!=l.align?l.align:"center",width:l.width},{default:(0,a.w5)((e=>[(0,a.Wm)(g,{size:l.option.size,effect:l.option.effect,type:l.option.type},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row[l.prop]),1)])),_:2},1032,["size","effect","type"])])),_:2},1032,["label","align","width"])):"button"==l.type?((0,a.wg)(),(0,a.j4)(s,{key:2,"show-overflow-tooltip":"",label:l.label,align:null!=l.align?l.align:"center",width:l.width},{default:(0,a.w5)((t=>[(0,a.Wm)(m,{onClick:l=>e.$emit("onButtonClick",t.row),type:"text",size:l.option.size},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.row[l.prop]),1)])),_:2},1032,["onClick","size"])])),_:2},1032,["label","align","width"])):"switch"==l.type?((0,a.wg)(),(0,a.j4)(s,{key:3,"show-overflow-tooltip":"",label:l.label,align:null!=l.align?l.align:"center",width:l.width},{default:(0,a.w5)((t=>[(0,a.Wm)(f,{onChange:l=>e.$emit("onSwitchChange",t.row),"inline-prompt":"","active-value":l.option.activeValue,"active-color":l.option.activeColor,"active-text":l.option.activeText,"inactive-value":l.option.inactiveValue,"inactive-color":l.option.inactiveColor,"inactive-text":l.option.inactiveText,modelValue:t.row[l.prop],"onUpdate:modelValue":e=>t.row[l.prop]=e},null,8,["onChange","active-value","active-color","active-text","inactive-value","inactive-color","inactive-text","modelValue","onUpdate:modelValue"])])),_:2},1032,["label","align","width"])):"progress"==l.type?((0,a.wg)(),(0,a.j4)(s,{key:4,"show-overflow-tooltip":"",label:l.label,align:null!=l.align?l.align:"center",width:l.width},{default:(0,a.w5)((e=>[(0,a.Wm)(y,{percentage:e.row[l.prop],status:l.option.status,color:l.option.color},null,8,["percentage","status","color"])])),_:2},1032,["label","align","width"])):"img"==l.type?((0,a.wg)(),(0,a.j4)(s,{key:5,"show-overflow-tooltip":"",label:l.label,align:null!=l.align?l.align:"center",width:l.width},{default:(0,a.w5)((t=>[(0,a.Wm)(h,{style:{width:"50px",height:"50px"},src:e.imageUrlPrefix+t.row[l.prop],class:"head_pic"},null,8,["src"])])),_:2},1032,["label","align","width"])):((0,a.wg)(),(0,a.j4)(s,{key:6,"show-overflow-tooltip":"",prop:null==l.alias?l.prop:l.alias,label:l.label,align:null!=l.align?l.align:"center",width:l.width,fixed:l.fixed},null,8,["prop","label","align","width","fixed"])):((0,a.wg)(),(0,a.j4)(s,{key:0,fixed:l.fixed,type:"selection",width:"45"},null,8,["fixed"]))],64)))),128)),t.operation?((0,a.wg)(),(0,a.j4)(s,{key:0,fixed:"right",label:"操作",align:"center",width:"220"},{default:(0,a.w5)((l=>[(0,a.WI)(e.$slots,"column",{column:l})])),_:3})):(0,a.kq)("",!0)])),_:3},8,["data","header-cell-style","cell-style","onSelectionChange"])),[[b,t.loading]])]),t.page?((0,a.wg)(),(0,a.iD)("div",p,[(0,a.Wm)(C,{onSizeChange:e.onSizeChange,onCurrentChange:e.onCurrentChange,layout:"total, sizes, prev, pager, next, jumper","current-page":t.page.current,"page-sizes":[10,20,50,100],"page-size":t.page.size,total:t.page.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])):(0,a.kq)("",!0)])}var c=t(2262),d={props:{loading:{type:Boolean,default:!1},page:{type:Object,default:{current:1,size:10,total:0}},column:{type:Array,default:[]},operation:{type:Boolean,default:!1},headerCellStyle:{type:Object,default:{color:"#606266",fontWeight:700,background:"var(--bg1)"}},data:{type:Array,default:[]}},emits:["onSizeChange","onCurrentChange","onSelectionChange","setCellColor","onButtonClick","onSwitchChange"],setup(e,l){const t=(0,c.qj)({cellStyle:function(e){let t={};return l.emit("setCellColor",e,((e={})=>{t=e})),t.padding="2px",t},imageUrlPrefix:(0,a.FN)()?.appContext.config.globalProperties.$imageUrl,onSizeChange:e=>{l.emit("onSizeChange",e)},onCurrentChange:e=>{l.emit("onCurrentChange",e)}});return{...(0,c.BK)(t)}}},s=t(3744);const g=(0,s.Z)(d,[["render",u]]);var m=g},6630:function(e,l,t){t.r(l),t.d(l,{default:function(){return f}});var a=t(6252);const o={class:"dialog-footer"};function n(e,l,t,n,i,r){const p=(0,a.up)("el-button"),u=(0,a.up)("el-input"),c=(0,a.up)("Table"),d=(0,a.up)("el-form-item"),s=(0,a.up)("el-form"),g=(0,a.up)("el-dialog"),m=(0,a.up)("el-card");return(0,a.wg)(),(0,a.j4)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{data:e.tableData,column:e.tableTitle,operation:!0,page:e.page,loading:e.loading,onOnSizeChange:e.onSizeChange,onOnCurrentChange:e.onCurrentChange,onSetCellColor:e.setCellColor},{search:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(p,{type:"primary",onClick:e.onAddfileType},{default:(0,a.w5)((()=>[(0,a.Uk)("添加发布类型")])),_:1},8,["onClick"])]),(0,a._)("div",null,[(0,a.Wm)(u,{modelValue:e.searchForm.cname,"onUpdate:modelValue":l[0]||(l[0]=l=>e.searchForm.cname=l),placeholder:"请输入发布类型名称"},null,8,["modelValue"])]),(0,a._)("div",null,[(0,a.Wm)(p,{onClick:e.onRefresh,icon:"RefreshRight",circle:""},null,8,["onClick"])]),(0,a._)("div",null,[(0,a.Wm)(p,{onClick:e.onSearch,type:"primary",icon:"Search"},{default:(0,a.w5)((()=>[(0,a.Uk)("查询")])),_:1},8,["onClick"])])])),column:(0,a.w5)((l=>[(0,a.Wm)(p,{onClick:t=>e.onEdit(l),type:"text",style:{color:"var(--edit)"}},{default:(0,a.w5)((()=>[(0,a.Uk)("编辑")])),_:2},1032,["onClick"]),(0,a.Wm)(p,{onClick:t=>e.onDelete(l),type:"text",style:{color:"var(--delete)"}},{default:(0,a.w5)((()=>[(0,a.Uk)("删除")])),_:2},1032,["onClick"])])),_:1},8,["data","column","page","loading","onOnSizeChange","onOnCurrentChange","onSetCellColor"]),(0,a.Wm)(g,{title:e.fileTypeTitle,modelValue:e.fileTypeVisible,"onUpdate:modelValue":l[6]||(l[6]=l=>e.fileTypeVisible=l),"show-close":!1},{footer:(0,a.w5)((()=>[(0,a._)("span",o,[(0,a.Wm)(p,{onClick:l[5]||(l[5]=l=>e.fileTypeVisible=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1}),(0,a.Wm)(p,{type:"primary",onClick:e.onSubmit},{default:(0,a.w5)((()=>[(0,a.Uk)("提交")])),_:1},8,["onClick"])])])),default:(0,a.w5)((()=>[(0,a.Wm)(s,{model:e.fileTypeForm,rules:e.rules,ref:"fileTypeRuleForm","status-icon":"","label-width":"150px"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{prop:"typeId",label:"发布类型id",rules:[{required:!0,message:"请输入发布类型id",trigger:"blur"},{pattern:/^[1-9][0-9]{0,10}$/,message:"id只能是数字且不能有空格,长度不能超过11位",trigger:"blur"}]},{default:(0,a.w5)((()=>[0==e.operate?((0,a.wg)(),(0,a.j4)(u,{key:0,modelValue:e.fileTypeForm.typeId,"onUpdate:modelValue":l[1]||(l[1]=l=>e.fileTypeForm.typeId=l),placeholder:"请输入发布类型id"},null,8,["modelValue"])):(0,a.kq)("",!0),1==e.operate?((0,a.wg)(),(0,a.j4)(u,{key:1,disabled:"",modelValue:e.fileTypeForm.typeId,"onUpdate:modelValue":l[2]||(l[2]=l=>e.fileTypeForm.typeId=l),placeholder:"请输入发布类型id"},null,8,["modelValue"])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(d,{prop:"cname",label:"发布类型中文名",rules:[{required:!0,message:"请输入发布类型中文名",trigger:"blur"}]},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:e.fileTypeForm.cname,"onUpdate:modelValue":l[3]||(l[3]=l=>e.fileTypeForm.cname=l),placeholder:"请输入发布类型中文名"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{prop:"ename",label:"发布类型英文名",rules:[{required:!0,message:"请输入发布类型英文名",trigger:"blur"}]},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:e.fileTypeForm.ename,"onUpdate:modelValue":l[4]||(l[4]=l=>e.fileTypeForm.ename=l),placeholder:"请输入发布类型英文名"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])),_:1})}var i=t(2262),r=t(1348),p=t(9737),u=t(5188),c=t(9669),d=t.n(c),s={props:{},components:{Table:u.Z},setup(){(0,a.bv)((()=>{e.onfileTypePage()}));const e=(0,i.qj)({searchForm:{cname:null},loading:!1,page:{current:1,size:10,total:1},tableTitle:[{prop:"",label:"",fixed:"left"},{prop:"typeId",label:"发布类型id"},{prop:"ename",label:"类型英文名"},{prop:"cname",label:"类型中文名"}],tableData:[],fileTypeRuleForm:(0,i.iH)(null),typeLoading:!1,fileTypeVisible:!1,fileTypeTitle:"添加发布类型",operate:0,fileTypeForm:{typeId:"",ename:"",cname:""},orgData:[],onfileTypePage:()=>{e.loading=!0,d().get("/fileType/getFileTypeList",{params:Object.assign(e.page,e.searchForm)}).then((l=>{e.loading=!1,e.tableData=l.data.result.list,e.page.current=l.data.result.pageNum,e.page.size=l.data.result.pageSize,e.page.total=l.data.result.total}))},onSearch:()=>{e.onfileTypePage()},onRefresh:()=>{e.searchForm={cname:null},e.onfileTypePage()},onSizeChange:l=>{e.page.size=l,e.onfileTypePage()},onCurrentChange:l=>{e.page.current=l,e.onfileTypePage()},onAddfileType:()=>{e.userTitle="添加发布类型",e.operate=0,e.fileTypeForm={typeId:"",ename:"",cname:""},e.fileTypeVisible=!0},onEdit:l=>{e.userTitle="修改发布类型",e.operate=1,e.fileTypeForm={typeId:l.column.row.typeId,cname:l.column.row.cname,ename:l.column.row.ename},e.fileTypeVisible=!0},onSubmit:async()=>{const l=e.fileTypeRuleForm;l&&(await l.validate(),0==e.operate?d().post("/fileType/fileTypeSave",e.fileTypeForm).then((l=>{l.data.result&&(r.z8.success({message:"添加成功！",type:"success"}),e.onfileTypePage(),e.fileTypeVisible=!1)})):d().patch("/fileType/fileTypeUpdate",e.fileTypeForm).then((l=>{l.data.result&&(r.z8.success({message:"修改成功！",type:"success"}),e.onfileTypePage(),e.fileTypeVisible=!1)})))},onDelete:l=>{p.T.confirm("此操作将永久删除该新闻, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{let t={typeId:l.column.row.typeId};d()["delete"]("/fileType/fileTypeDelete",{params:t}).then((l=>{l&&(r.z8.success("删除成功!"),e.onfileTypePage())}))})).catch((e=>{console.log(e)}))}});return{...(0,i.BK)(e)}}},g=t(3744);const m=(0,g.Z)(s,[["render",n]]);var f=m}}]);
//# sourceMappingURL=630.baf5e75b.js.map